# ChroLens Portal 版本更新紀錄

## [2.5.3] - 2025/12/06

### 新功能
- **分組標籤顏色功能**（Dracula 配色 + 自訂顏色）
  - 為每個分組設定專屬顏色標籤
  - 提供 10 種 Dracula 主題預設顏色：粉紅、紫色、青色、綠色、橙色、紅色、黃色、藍紫、白色、無色
  - **新增自訂顏色功能**：選擇「自訂」選項可開啟完整顏色選擇器（Windows 風格）
  - 顏色預覽框即時顯示當前顏色，點擊預覽框可直接開啟顏色選擇器
  - 顏色選擇器位於分組命名編輯區旁，方便同時設定名稱和顏色
  - 所有按鈕（啟動、關閉、置頂切換）自動套用分組顏色
  - Mini 模式完整支援顏色顯示（包含自訂顏色）
  - 顏色設定（包含自訂顏色的 HEX 值）自動保存並在重啟後保留

### 重大修復
- **配置持久化問題修復**
  - 修復分組數量在程式重啟後重置為預設值的問題
  - 修復視窗分組欄位（group_var3、group_var4）在重啟後遺失的問題
  - 改進配置保存邏輯，確保所有 10 個分組（A-J）的設定都能正確保存
  - 新增分組數量變更追蹤，自動保存設定
  - 新增所有 4 個分組欄位的變更追蹤

- **按鈕顏色套用問題修復**
  - 修復按鈕顏色無法正確顯示的問題
  - 改用 ttkbootstrap Style 系統來套用自定義顏色
  - 為每個分組顏色創建專用樣式（格式：`Group{code}.{type}.TButton`）
  - 修復 Mini 模式無法設定 icon 的錯誤
  - 優化顏色套用邏輯，確保主視窗和 Mini 模式顏色一致

### 穩定性改進
- 完善錯誤處理機制
- 新增配置載入後自動重建按鈕功能
- 改進設定檔讀取容錯能力
- 修正 Mini 模式 icon 路徑處理邏輯

## [2.5.2] - 2025/11/24

### UI 優化
- 主視窗固定寬度 1400px，優化響應式布局
- 最小高度調整為 800px，確保所有元件完整顯示
- 分組檔案列改為固定高度，消除多餘空白空間
- 儲存按鈕改為綠色，提升視覺辨識度
- Mini 模式動態寬度優化，根據分組數量自動調整
- 新增「顯示桌面」按鈕到 Mini 模式
- 置頂按鈕改為居中排列，每行 5 個，最多 2 行
- 群組按鈕改為左右分割布局（左側啟動，右側關閉）
- 右側控制按鈕改為靠右對齊
- 修復按鈕文字導致寬度不一致問題
- 啟動間隔與分組數量位置對調，UI 更直覺

### 自動更新功能修復（重大修復）
- **修復更新後無法啟動新版本的問題**
- 更新腳本現在使用正確的新版本執行檔路徑
- 新增詳細的更新日誌記錄（`update_log.txt`）
- 改進錯誤處理和驗證機制
- 延長程式關閉等待時間（15 秒）
- 新增執行檔安裝驗證
- 新增程式啟動成功驗證
- 記錄完整更新流程和錯誤訊息
- 新增開發環境檢測（防止在未打包狀態測試）
- 改進批次腳本的目錄切換邏輯
- 新增診斷工具（`diagnose_update.py`）
- 新增完整測試指南（`UPDATE_TEST_GUIDE.md`）

## [2.5.1] - 2025/11/23
- 更新功能測試通過、清理規範完善、穩定性優化

## [2.5] - 2025/11/22
- Mini 模式優化、語言切換修復、自動清理測試檔案

## [2.4] - 2025/11/20
- 多組視窗佈局記憶功能、FancyZones 整合
